From 8ee50982ed4ae9c17f1000045a2e1ea489552371 Mon Sep 17 00:00:00 2001
From: yogurt <yusong1117.u@gmail.com>
Date: Sat, 8 Nov 2025 13:09:51 +0800
Subject: [PATCH 2/2] fix(clk): clk error, cannot record or play file

cvitek-i2s-subsys 4108000.i2s_subsys: Get i2s_mclk failed
---
 boards/default/dts/cv180x/cv180x_base.dtsi | 25 +++++++++++-----------
 1 file changed, 12 insertions(+), 13 deletions(-)

diff --git a/boards/default/dts/cv180x/cv180x_base.dtsi b/boards/default/dts/cv180x/cv180x_base.dtsi
index a8cf76f..94465db 100644
--- a/boards/default/dts/cv180x/cv180x_base.dtsi
+++ b/boards/default/dts/cv180x/cv180x_base.dtsi
@@ -565,8 +565,8 @@
 	i2s0: i2s@04100000 {
 		compatible = "cvitek,cv1835-i2s";
 		reg = <0x0 0x04100000 0x0 0x2000>;
-		clocks = <&i2s_mclk 0>;
-		clock-names = "i2sclk";
+		clocks = <&clk CV180X_CLK_SDMA_AUD0>;
+		clock-names = "clk_sdma_aud0";
 		dev-id = <0>;
 		#sound-dai-cells = <0>;
 		dmas = <&dmac 0 1 1>; /* read channel */
@@ -578,8 +578,8 @@
 	i2s1: i2s@04110000 {
 		compatible = "cvitek,cv1835-i2s";
 		reg = <0x0 0x04110000 0x0 0x2000>;
-		clocks = <&i2s_mclk 0>;
-		clock-names = "i2sclk";
+		clocks = <&clk CV180X_CLK_SDMA_AUD1>;
+		clock-names = "clk_sdma_aud1";
 		dev-id = <1>;
 		#sound-dai-cells = <0>;
 		dmas = <&dmac 2 1 1 /* read channel */
@@ -592,8 +592,8 @@
 	i2s2: i2s@04120000 {
 		compatible = "cvitek,cv1835-i2s";
 		reg = <0x0 0x04120000 0x0 0x2000>;
-		clocks = <&i2s_mclk 0>;
-		clock-names = "i2sclk";
+		clocks = <&clk CV180X_CLK_SDMA_AUD2>;
+		clock-names = "clk_sdma_aud2";
 		dev-id = <2>;
 		#sound-dai-cells = <0>;
 		dmas = <&dmac 6 1 1 /* read channel */
@@ -607,8 +607,8 @@
 	i2s3: i2s@04130000 {
 		compatible = "cvitek,cv1835-i2s";
 		reg = <0x0 0x04130000 0x0 0x2000>;
-		clocks = <&i2s_mclk 0>;
-		clock-names = "i2sclk";
+		clocks = <&clk CV180X_CLK_SDMA_AUD3>;
+		clock-names = "clk_sdma_aud3";
 		dev-id = <3>;
 		#sound-dai-cells = <0>;
 		dmas = <&dmac 7 1 1>; /* write channel */
@@ -620,16 +620,16 @@
 	adc: adc@0300A100 {
 		compatible = "cvitek,cv182xaadc";
 		reg = <0x0 0x0300A100 0x0 0x100>;
-		clocks = <&i2s_mclk 0>;
-		clock-names = "i2sclk";
+		clocks = <&clk CV180X_CLK_SDMA_AUD3>;
+		clock-names = "clk_sdma_aud3";
 		clk_source = <0x04130000>; /* MCLK source is I2S3 */
 	};
 
 	dac: dac@0300A000 {
 		compatible = "cvitek,cv182xadac";
 		reg = <0x0 0x0300A000 0x0 0x100>;
-		clocks = <&i2s_mclk 0>;
-		clock-names = "i2sclk";
+		clocks = <&clk CV180X_CLK_SDMA_AUD3>;
+		clock-names = "clk_sdma_aud3";
 	};
 
 	pdm: pdm@0x041D0C00 {
@@ -908,4 +908,3 @@
 		};
 	};
 };
-
-- 
2.34.1

